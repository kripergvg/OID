function ConfirmAlert(n){this.open=function(){$("#confirmAlert").modal()};$(function(){var t=$("#btnConfirm");t.click(function(){n.onConfirm()})})}function deleteObject(n){var t=function(){$(n).submit()},i={onConfirm:t},r=new ConfirmAlert(i);r.open()}$(function(){$("input[data-radio-identifier]").change(function(){var n=$(this).attr("data-radio-identifier"),i=$("input[data-radio-identifier="+n+"]:checked").val(),t=$("div[data-radio-identifier="+n+"]");t.hide();t.closest("[data-region='"+i+"']").show()})});$(function(){function i(n){$.ajax({url:"/region/GetLocationsByLocality?localityCode="+n}).done(function(n){var i=$("#locationList"),r;i.empty();r=t(n);i.html(r)})}function t(n){for(var i,r="",t=0;t<n.length;t++)i=n[t],r+="<option value='"+i.code+"'>"+i.name+"<\/option>";return r}var n=$("#localityList"),r=$("#regionList");r.change(function(){var u=r.val();$.ajax({url:"/region/GetLocalities?regionCode="+u}).done(function(r){n.empty();var u=t(r);n.html(u);i(r[0].code)});$.ajax({url:"/region/GetLocationsByRegion?regionCode="+u}).done(function(n){var i=$("#cityList"),r;i.empty();r=t(n);i.html(r)})});n.change(function(){var t=n.val();i(t)})});String.prototype.replaceAll=function(n,t){var i=this;return i.replace(new RegExp(n,"g"),t)};$(function(){function h(n,t,i,r,u){return s.replace("%checkType",t).replace("%checkTypeText",n).replaceAll("%description",i).replaceAll("%image",r).replaceAll("%index",u)}function c(){o.val("");t.val("");i=null}var n=$("#checkList"),f=n.find("tbody"),e=$("#checkType"),o=$("#checkDescription"),t=$("#checkImage"),i,r=new FileReader,u,s;r.onloadend=function(){i=r.result};t.change(function(){r.readAsDataURL(t[0].files[0])});u=f.find("tr").length;s='<tr>                    <td>                        <input type="hidden" name="ObjectChecks.Index" value="%index"/>                        <input type="hidden" name="ObjectChecks[%index].CheckType" value="%checkType"/>                          %checkTypeText                    <\/td>                    <td>                        <input type="hidden" name="ObjectChecks[%index].Description" value="%description" />                        %description                    <\/td>                    <td>                        <input type="hidden" name="ObjectChecks[%index].ImageUrl" value="%imageUrl" />                        <img src="%image"  style="max-height: 50px; max-width: 50px;"/>                    <\/td>                    <td>                        <button class="btn btn-danger checkListDelete" type="button"><span class="glyphicon glyphicon-trash"><\/span><\/button>                    <\/td>                <\/tr>';$("#addCheck").click(function(){n.show();var t=e.val(),r=e.find("option:selected").text(),s=o.val(),l=h(r,t,s,i,u);f.append(l);u++;c()});n.on("click",".checkListDelete",function(){$(this).parents("tr").remove()})});$(function(){function e(t){var i=t.find("input.objectId").val(),r=t.find("input.objectName").val();n.append('<option value="'+i+'">'+r+"<\/option>")}function o(n,t,i){return u.replaceAll("@index",n).replace("@dealObject.ObjectId",t).replaceAll("@dealObject.Name",i)}function s(){var t=n.find("option:selected"),i=t.attr("value"),r=t.text();return{objectId:i,name:r}}function h(){var t=n.find("option:selected");t.remove()}var t=$("#dealObjectList"),n=$("#freeDealObjects"),i=$("#addDealObject"),r,u,f;t.on("click",".deleteDealObject",function(){var t=$(this).parents("tr");e(t);t.remove();n.find("option").length!==0&&(n.prop("disabled",!1),i.prop("disabled",!1))});r=t.find("tr").length;u='   <tr>                        <td>                            <input type="hidden" name="SelectedDealObjects.Index" value="@index"/>                            <input type="hidden" name="SelectedDealObjects[@index].ObjectId" class="objectId"  value="@dealObject.ObjectId"/>                            <input type="hidden" name="SelectedDealObjects[@index].Name" class="objectName"  value="@dealObject.Name" />                            @dealObject.Name                        <\/td>                        <td style="width: 95px;">                            <button class="btn btn-danger deleteDealObject" type="button">Удалить<\/button>                        <\/td>                    <\/tr>';f=t.find("tbody");i.click(function(){var t=s(),u;h();u=o(r,t.objectId,t.name);f.append(u);r++;n.find("option").length===0&&(n.prop("disabled",!0),i.prop("disabled",!0))})});$(function(){var n=$("#dealList tbody tr");n.click(function(){var n=$(this).attr("data-deal-id");window.location="/Deal/ViewDeal?dealId="+n})});